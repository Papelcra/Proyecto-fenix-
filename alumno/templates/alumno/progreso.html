{% extends 'base.html' %}
{% block title %}Mi Panel | Alumno Club F√©nix{% endblock %}
{% block content %}
<style>
body {background:linear-gradient(to right,#111,#0e3752);color:white;}
.panel-alumno {
  max-width:1100px; margin:44px auto 40px auto; padding:32px 23px;
  background:#142f46; border-radius:20px; box-shadow:0 2px 22px #00bffd33;
}
h2 {color:#00bfff;margin-bottom:20px;font-weight:700;}
.tabs {display:flex; gap:14px; margin-bottom:23px;}
.tab-btn {
  background:transparent; color:#00ceff; border:none;font-size:1.13em;
  font-weight:600;padding:8px 28px;cursor:pointer;border-radius:11px;transition:background .16s;
}
.tab-btn.active, .tab-btn:hover {background:#00bfff;color:#fff;}
.tab-content {display:none;}
.tab-content.active{display:block; animation:fadeIn 0.3s;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
.pagos-table{width:100%;background:#132947;border-radius:13px;margin:14px 0 14px 0;box-shadow:0 2px 15px #0b153322;}
.pagos-table th,.pagos-table td{color:#fff;border-bottom:1px solid #22557944;padding:11px;text-align:center;}
.pagos-table th{background:#0f2545;color:#23ebff;}
.estado-validado{color:#17e76c;font-weight:700;}
.estado-rechazado{color:#fb384a;font-weight:700;}
.estado-pendiente{color:#eabb19;font-weight:700;}
.progress-table{width:100%;background:#18376b;border-radius:13px;margin:14px 0 14px 0;box-shadow:0 2px 13px #0b153322;}
.progress-table th,.progress-table td{color:#fff;border-bottom:1px solid #22557944;padding:11px;text-align:center;}
.progress-table th{background:#081e36;color:#23ebff;}
.completado-yes{color:#1ef279;font-weight:700;}
.completado-no{color:#fb384a;font-weight:700;}
.btn-panel {
  display:inline-block;margin-bottom:18px;background:#10253b;color:#00dbb8!important;
  border:2px solid #00dbb8;border-radius:10px;font-weight:600;font-size:1em;
  padding:8px 22px;transition:0.2s;text-align:center;text-decoration:none!important;
}
.btn-panel:hover{background:#00dbb8;color:#10253b!important;}
</style>
<div class="panel-alumno">
  <a href="{% url 'alumno:dashboard' %}" class="btn-panel">‚¨Ö Volver al Dashboard</a>
  <h2>Panel de Alumno</h2>
  <div class="tabs">
    <button class="tab-btn active" onclick="showTab('pagos')">üí≥ Pagos & Membres√≠a</button>
    <button class="tab-btn" onclick="showTab('progreso')">üèä Progreso y Niveles</button>
  </div>
  <div id="tab-pagos" class="tab-content active">
    <h3 style="color:#09f5b8;">Tus Pagos y Membres√≠a</h3>
    <table class="pagos-table">
      <thead>
        <tr>
          <th>Membres√≠a</th>
          <th>Valor</th>
          <th>Fecha</th>
          <th>Estado</th>
        </tr>
      </thead>
      <tbody>
        {% for pago in pagos %}
          <tr>
            <td>
              {% if pago.membresia %}
                {{ pago.membresia.nombre }}
              {% else %}
                Sin membres√≠a
              {% endif %}
            </td>
            <td>${{ pago.valor|floatformat:2 }}</td>
            <td>{{ pago.fecha_pago|date:"Y-m-d H:i" }}</td>
            <td><span class="estado-{{ pago.estado|lower }}">{{ pago.estado }}</span></td>
          </tr>
        {% empty %}
          <tr><td colspan="4" style="color:#fff;">No has registrado pagos.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div id="tab-progreso" class="tab-content">
    <h3 style="color:#32c3fe;">Tu Progreso en Nataci√≥n</h3>
    <table class="progress-table">
      <thead>
        <tr>
          <th>Nivel</th>
          <th>Comentarios del profesor</th>
          <th>Completado</th>
          <th>Fecha</th>
        </tr>
      </thead>
      <tbody>
        {% for prog in progresos %}
          <tr>
            <td>
              {% if prog.nivel %}
                {{ prog.nivel.nombre }}
              {% else %}
                No asignado
              {% endif %}
            </td>
            <td>{{ prog.comentarios|default:"Sin comentarios" }}</td>
            <td>
              <span class="{% if prog.completado %}completado-yes{% else %}completado-no{% endif %}">
                {% if prog.completado %}S√≠{% else %}No{% endif %}
              </span>
            </td>
            <td>{{ prog.fecha|date:"Y-m-d" }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="4" style="color:#fff;">Sin progresos registrados.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<script>
function showTab(tab){
  document.querySelectorAll(".tab-btn").forEach(btn=>btn.classList.remove("active"));
  document.querySelectorAll(".tab-content").forEach(tabc=>tabc.classList.remove("active"));
  document.querySelector(`[onclick*="'${tab}'"]`).classList.add("active");
  document.getElementById("tab-"+tab).classList.add("active");
}
</script>
{% endblock %}
